<!DOCTYPE html>
<html>
<head>
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <link rel="stylesheet" type="text/css" href="GDCA_v0.95/css/dc.css"/>
    <style>
        body { font-family: Ubuntu, Helvetica, sans-serif; font-size: 12px; }
    </style>
<title>Ready</title>
</head>
<body>
<div id="Nav">
</div>
<div id="Slide">
</div>

<script type="text/javascript" src="/js/d3.js"></script>
<script type="text/javascript" src="/js/queue.v1.min.js"></script>
<script type="text/javascript" src="/js/moment.min.js"></script>

<script type="text/javascript" src="/js/reductio.js"></script>
<script type="text/javascript" src="/js/crossfilter.js"></script>

<script type="text/javascript" src="/js/dc.js"></script>

<script type="text/javascript" src="/js/underscore-min.js"></script>

<script type="text/javascript" src="/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="/js/gda_v0.99.js"></script>

<script>

var urgencyColors = d3.scale.ordinal()
    .domain(["Now", "Today", "This Week", "This Month", ""])
    .range (["#e6550d", "#fd8d3c", "#fdfd80", "#6baed6", "#d9d9d9" ]);

var statusColors = d3.scale.ordinal()
    .domain(["New", "High", "Medium", "Low", "Closed", "Red Light"])
    .range (["#e6550d", "#fd8d3c", "#fdfd80", "#6baed6", "#d9d9d9", "#d62728" ]);

var originColors = d3.scale.category20b();

// these could go into a shared js file, rather than the .html
gda.dataFilter = function(data) {
    var Now = new Date();
    var NextYear = new Date(Now.getFullYear()+1,0,1);
    var daysFormat = d3.format(".0f");
    console.log("BH dataFilter");


    if (data && data.length>0 ) {    // temporary hardwired filter for certain csv's.
        if (gda.utils.fieldExists(data[0]["sensor_location_name"])) {
            var format = d3.time.format("%Y-%d-%mT%H:%M:%S");
            var bDT = gda.utils.fieldExists(data[0]["datetime"]);
            _.each(data, function(d) {
                d.dd = format.parse(d["datetime"]);
                gda.utils.addDateOptions(d,d.dd);    // add Year,Quarter,Month,Week,Day
            });
	    }

        TcumFileUnits = 1;
        _.each(data, function(d) {
            d.cumFileUnits = TcumFileUnits;
            TcumFileUnits++;
        });
    }
    return data;
}

var ss = gda.slides;

var sDefaultSlideFile = "/GDCA_Slides/BathHack.json";    // enter a csv file path here to auto-load
ss.run(sDefaultSlideFile,document.getElementById('Nav'), document.getElementById('Slide'));// where to show the edit controls and slide

</script>
</body>
</html>
